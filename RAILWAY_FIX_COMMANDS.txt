# ⚡ Railway 긴급 수정 명령어 (즉시 실행)

## 1. Railway CLI에서 실행 (권장)
```bash
# Railway 로그인
railway login
railway link

# 데이터베이스 수정 스크립트 실행
railway run python fix_railway_db.py

# 서비스 재시작
railway restart

# 로그 확인
railway logs --tail
```

## 2. Railway 웹 콘솔에서 실행
1. https://railway.app 접속
2. VideoPlanet 프로젝트 선택
3. "Deploy" 탭 → "Restart" 클릭
4. "Logs" 탭에서 에러 확인

## 3. 테스트 명령어
```bash
# CORS 헤더 확인
curl -I -X OPTIONS \
  -H "Origin: https://vlanet-v2-0-krye028sg-vlanets-projects.vercel.app" \
  -H "Access-Control-Request-Method: POST" \
  https://videoplanet.up.railway.app/api/users/login/

# 로그인 테스트
curl -X POST https://videoplanet.up.railway.app/api/users/login/ \
  -H "Content-Type: application/json" \
  -H "Origin: https://vlanet-v2-0-krye028sg-vlanets-projects.vercel.app" \
  -d '{"email":"test@example.com","password":"test123"}'
```

## 4. 문제 지속 시 강제 수정
```bash
# Python 쉘에서 직접 실행
railway run python manage.py shell << EOF
from django.db import connection
with connection.cursor() as cursor:
    cursor.execute("ALTER TABLE users_user ALTER COLUMN deletion_reason SET DEFAULT ''")
    cursor.execute("UPDATE users_user SET deletion_reason = '' WHERE deletion_reason IS NULL")
print("Fixed!")
EOF
```